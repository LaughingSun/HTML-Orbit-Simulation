(function(){var i,n,s,l,o,h=[],f;(function(){i=function(c){f=c.settings.earth;i.setEarthMass(f.m);i.UI=l(c.ui);i.Renderer=n(c.renderer);i.Physics=s(c.physics);document.getElementById("DEBUG");return i};i.setEarthMass=function(c){f.m=c*1E11}})();(function(){function c(b){if(b.x!==undefined&&b.y!==undefined&&b.radius!==undefined){e.beginPath();e.arc(b.x,b.y,b.radius,0,Math.PI*2,true);if(b.strokeStyle!==undefined){e.strokeStyle=b.strokeStyle;e.stroke()}if(b.fillStyle!==undefined){e.fillStyle=b.fillStyle;
e.fill()}}}var e,a,g=false;n=function(b){e=l.canvas.getContext("2d");a=new Image;a.src=b.earthimg;a.onload=function(){g=true};return n};n.redraw=function(){e.clearRect(0,0,l.canvas.width,l.canvas.height);for(var b in h)h[b].draw();g===false?c({x:f.x,y:f.y,radius:f.r,strokeStyle:"#00FF00",fillStyle:"#00FF00"}):e.drawImage(a,f.x-a.width/2,f.y-a.height/2)};n.drawSatellite=function(b){for(var p=b.xpoints,q=b.ypoints,t=b.colors,k=p.length-1;k>-1;k-=10)c({x:p[k],y:q[k],radius:1.25,fillStyle:t[k]});c(b)}})();
(function(){s=function(){return s};s.reCalc=function(){for(var c=[],e=h.length-1;e>-1;e--){var a=h[e],g=(a.x-f.x)*(a.x-f.x)+(a.y-f.y)*(a.y-f.y);if(g<=f.r2)c.push(e);else{var b=Math.atan2(a.y-f.y,a.x-f.x);g=-6.673E-11*f.m*a.m/g;a.u+=g*Math.cos(b)/a.m;a.v+=g*Math.sin(b)/a.m;a.xpoints.push(a.x);a.ypoints.push(a.y);a.colors.push(Math.abs(a.initSpeed-Math.sqrt(a.u*a.u+a.v*a.v))<0.1?"rgb(256, 256, 0)":Math.sqrt(a.u*a.u+a.v*a.v)>a.initSpeed*1.5?"rgb(256, 0, 0)":Math.sqrt(a.u*a.u+a.v*a.v)>a.initSpeed?"rgb(256, 128, 128)":
Math.sqrt(a.u*a.u+a.v*a.v)>a.initSpeed/1.2?"rgb(64, 64, 256)":"rgb(128, 256, 256)");a.x+=a.u;a.y+=a.v}}for(e=c.length-1;e>-1;e--)h.splice(c[e],1)}})();(function(){function c(d){for(var r=0,j=0,m=e;m.tagName!="BODY";){r+=e.offsetTop;j+=e.offsetLeft;m=m.offsetParent}i.setEarthMass(parseFloat(q.innerHTML));h.push(new o({x:parseInt(d.clientX-j+window.pageXOffset),y:parseInt(d.clientY-r+window.pageYOffset),u:parseFloat($(b).slider("value")),v:parseFloat($(p).slider("value")),m:parseFloat($(a).slider("value"))}))}
var e,a,g,b,p,q,t,k,u;l=function(d){l.canvas=e=document.getElementById(d.canvas);a=document.getElementById(d.satmass);g=document.getElementById(d.earthmass);b=document.getElementById(d.initx);p=document.getElementById(d.inity);q=document.getElementById(d.earthmasslbl);q.innerHTML=d.defaultearthmass;t=document.getElementById(d.satmasslbl);t.innerHTML=d.defaultsatmass;k=document.getElementById(d.initxlbl);k.innerHTML=d.defaultinitx;u=document.getElementById(d.initylbl);u.innerHTML=d.defaultinity;$(g).slider({slide:function(r,
j){var m=parseFloat(j.value);q.innerHTML=m;i.setEarthMass(m)},value:d.defaultearthmass,min:1,max:100,step:1});$(a).slider({slide:function(r,j){var m=parseFloat(j.value);t.innerHTML=m},value:d.defaultsatmass,min:1,max:30,step:1});$(b).slider({slide:function(r,j){k.innerHTML=j.value},value:d.defaultinitx,min:-3,max:3,step:0.5});$(p).slider({slide:function(r,j){u.innerHTML=j.value},value:d.defaultinity,min:-3,max:3,step:0.5});$(a).val(d.defaultsatmass);$(g).val(d.defaultearthmass);$(b).val(d.defaultinitx);
$(p).val(d.defaultinity);$(l.canvas).click(c);$("#RESET_INPUT").click(function(){h=[]});return l}})();(function(){o=function(c){this.u=c.u;this.v=c.v;this.x=c.x;this.y=c.y;this.m=c.m;this.initSpeed=Math.sqrt(c.u*c.u+c.v*c.v);this.xpoints=[];this.ypoints=[];this.colors=[]};o.prototype.draw=function(){n.drawSatellite({x:this.x,y:this.y,radius:3.75,strokeStyle:"#FFFFFF",fillStyle:"#FFFFFF",xpoints:this.xpoints,ypoints:this.ypoints,colors:this.colors})}})();(function(){window.Orbits=i({renderer:{earthimg:"./images/earth.png"},
physics:{},ui:{canvas:"CANVAS_BOARD",satmass:"SAT_MASS_INPUT",satmasslbl:"SAT_MASS_LBL",earthmass:"EARTH_MASS_INPUT",earthmasslbl:"EARTH_MASS_LBL",initx:"INIT_X_INPUT",initxlbl:"INIT_X_LBL",inity:"INIT_Y_INPUT",initylbl:"INIT_Y_LBL",defaultsatmass:15,defaultearthmass:50,defaultinitx:1,defaultinity:1},settings:{earth:{x:310,y:250,r:10,r2:100,m:50}}});setInterval(function(){n.redraw();s.reCalc()},25);h.push(new o({x:150,y:150,u:1,v:0,m:15}));h.push(new o({x:150,y:350,u:1,v:0,m:15}));h.push(new o({x:460,
y:150,u:-1,v:0,m:15}));h.push(new o({x:460,y:350,u:-1,v:0,m:15}))})()})();
