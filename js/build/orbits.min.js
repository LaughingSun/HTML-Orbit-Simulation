(function(){var q,n=[];(function(){q=function(d){q.UI=j(d.ui);q.Renderer=o(d.renderer);q.Physics=l(d.physics);document.getElementById("DEBUG");return q}})();var o;(function(){function d(c){if(c.x!==undefined&&c.y!==undefined&&c.radius!==undefined){e.beginPath();e.arc(c.x,c.y,c.radius,0,Math.PI*2,true);if(c.strokeStyle!==undefined){e.strokeStyle=c.strokeStyle;e.stroke()}if(c.fillStyle!==undefined){e.fillStyle=c.fillStyle;e.fill()}}else console.log("Failed")}var e;o=function(){e=j.canvas.getContext("2d");
return o};o.redraw=function(){e.clearRect(0,0,j.canvas.width,j.canvas.height);for(var c in n){var f=n[c];this.drawSatellite({x:f.x,y:f.y,radius:3.75,strokeStyle:"#FFFFFF",fillStyle:"#FFFFFF",xpoints:f.xpoints,ypoints:f.ypoints,colors:f.colors,c:f.c})}};o.drawSatellite=function(c){for(var f=c.xpoints,g=c.ypoints,a=c.colors,h=c.c,i=f.length-1;i>-1;i-=10)h!==undefined?d({x:f[i],y:g[i],radius:1.25,fillStyle:h}):d({x:f[i],y:g[i],radius:1.25,fillStyle:a[i]});d(c)};o.drawSatelliteCollision=function(){}})();
var l;(function(){var d=1;l=function(){return l};l.setTimestep=function(e){d=e};l.getTimestep=function(){return d};l.reCalc=function(e){for(var c=[],f=n.length-1,g=f;g>-1;g--){for(var a=n[g],h=f;h>-1;h--){var i=n[h];if(g!==h){var m=a.x-i.x,r=a.y-i.y;h=m*m+r*r;if(h<=i.r2){c.push(g);break}else{m=Math.atan2(r,m);h=-0.006673*i.m*a.m/h;a.u+=h*Math.cos(m)/a.m*d;a.v+=h*Math.sin(m)/a.m*d}}}a.x+=a.u*d;a.y+=a.v*d;if(a.x<0||a.y<0||a.x>1E3||a.y>1E3)c.push(g);if(e===true){a.xpoints.push(a.x);a.ypoints.push(a.y);
a.colors.push(Math.abs(a.initSpeed-Math.sqrt(a.u*a.u+a.v*a.v))<0.1?"rgb(256, 256, 0)":Math.sqrt(a.u*a.u+a.v*a.v)>a.initSpeed*1.5?"rgb(256, 0, 0)":Math.sqrt(a.u*a.u+a.v*a.v)>a.initSpeed?"rgb(256, 128, 128)":Math.sqrt(a.u*a.u+a.v*a.v)>a.initSpeed/1.2?"rgb(64, 64, 256)":"rgb(128, 256, 256)")}}for(g=c.length-1;g>-1;g--)n.splice(c[g],1)}})();var j;(function(){function d(b){for(var p=0,k=0,s=e;s.tagName!="BODY";){p+=e.offsetTop;k+=e.offsetLeft;s=s.offsetParent}j.addSatellite({x:parseInt(b.clientX-k+window.pageXOffset),
y:parseInt(b.clientY-p+window.pageYOffset),m:parseFloat($(c).slider("value")),u:parseFloat($(f).slider("value")),v:parseFloat($(g).slider("value")),r:parseFloat($(t).slider("value"))})}var e,c,f,g,a,h,i,m,r,t,u;j=function(b){j.canvas=e=document.getElementById(b.canvas);c=document.getElementById(b.satmass);f=document.getElementById(b.initx);g=document.getElementById(b.inity);r=document.getElementById(b.timestep);m=document.getElementById(b.timesteplbl);a=document.getElementById(b.satmasslbl);h=document.getElementById(b.initxlbl);
i=document.getElementById(b.initylbl);t=document.getElementById(b.satradius);u=document.getElementById(b.satradiuslbl);m.innerHTML=b.defaulttimestep;a.innerHTML=b.defaultsatmass;h.innerHTML=b.defaultinitx;i.innerHTML=b.defaultinity;u.innerHTML=b.defaultsatradius;l.setTimestep(b.defaulttimestep);$(r).slider({slide:function(p,k){var s=parseFloat(k.value);m.innerHTML=s;l.setTimestep(s)},value:b.defaulttimestep,min:0.01,max:0.1,step:0.01});$(t).slider({slide:function(p,k){u.innerHTML=k.value},value:b.defaultsatradius,
min:1,max:50,step:1});$(c).slider({slide:function(p,k){a.innerHTML=k.value},value:b.defaultsatmass,min:1,max:30,step:1});$(f).slider({slide:function(p,k){h.innerHTML=k.value},value:b.defaultinitx,min:-3,max:3,step:0.5});$(g).slider({slide:function(p,k){i.innerHTML=k.value},value:b.defaultinity,min:-3,max:3,step:0.5});$(c).val(b.defaultsatmass);$(f).val(b.defaultinitx);$(g).val(b.defaultinity);$(j.canvas).click(d);$("#RESET_INPUT").click(function(){n=[]});return j};j.addSatellite=function(b){n.push({x:b.x,
y:b.y,m:b.m*1E3,u:b.u,v:b.v,c:b.c,r2:b.r*b.r,initSpeed:Math.sqrt(b.u*b.u+b.v*b.v),xpoints:[],ypoints:[],colors:[]})}})();(function(){window.Orbits=q({renderer:{},physics:{},ui:{canvas:"CANVAS_BOARD",satradius:"SAT_RADIUS_INPUT",satradiuslbl:"SAT_RADIUS_LBL",satmass:"SAT_MASS_INPUT",satmasslbl:"SAT_MASS_LBL",initx:"INIT_X_INPUT",initxlbl:"INIT_X_LBL",inity:"INIT_Y_INPUT",initylbl:"INIT_Y_LBL",timesteplbl:"TIME_STEP_LBL",timestep:"TIME_STEP_INPUT",defaultsatradius:5,defaultsatmass:15,defaultinitx:0,
defaultinity:1.5,defaulttimestep:0.01},settings:{}});j.addSatellite({x:325,y:175,u:0,v:0,m:25,r:5,c:"#FF0000"});j.addSatellite({x:375,y:275,u:0,v:0,m:25,r:5,c:"#FF0000"});j.addSatellite({x:300,y:350,u:0,v:0,m:25,r:5,c:"#FFFF00"});j.addSatellite({x:200,y:300,u:0,v:0,m:25,r:5,c:"#FFFF00"});var d=0,e=setInterval(function(){o.redraw();for(var c=30;c>-1;c--)l.reCalc();l.reCalc(true);d++;if(1E5===d){console.log("Done");clearInterval(e)}},25)})()})();
