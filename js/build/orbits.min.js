(function(){var j,m,p,k,r,n=[],f;(function(){j=function(c){f=c.settings.earth;j.UI=k(c.ui);j.Renderer=m(c.renderer);j.Physics=p(c.physics);document.getElementById("DEBUG");return j};j.setEarthMass=function(c){f.m=c*1E11}})();(function(){function c(b){if(b.x!==undefined&&b.y!==undefined&&b.radius!==undefined){e.beginPath();e.arc(b.x,b.y,b.radius,0,Math.PI*2,true);if(b.strokeStyle!==undefined){e.strokeStyle=b.strokeStyle;e.stroke()}if(b.fillStyle!==undefined){e.fillStyle=b.fillStyle;e.fill()}}}var e,
a,g=false;m=function(b){e=k.canvas.getContext("2d");a=new Image;a.src=b.earthimg;a.onload=function(){g=true};return m};m.redraw=function(){e.clearRect(0,0,k.canvas.width,k.canvas.height);for(var b in n)n[b].draw();g===false?c({x:f.x,y:f.y,radius:f.r,strokeStyle:"#00FF00",fillStyle:"#00FF00"}):e.drawImage(a,f.x-a.width/2,f.y-a.height/2)};m.drawSatellite=function(b){c(b);var h;for(h=b.xpoints.length-1;h>-1;h--)c({x:b.xpoints[h],y:b.ypoints[h],radius:1,fillStyle:b.colors[h]})}})();(function(){p=function(){return p};
p.reCalc=function(){for(var c=[],e=n.length-1;e>-1;e--){var a=n[e],g=(a.x-f.x)*(a.x-f.x)+(a.y-f.y)*(a.y-f.y);if(g<=f.r2)c.push(e);else{var b=Math.atan2(a.y-f.y,a.x-f.x);g=-6.673E-11*f.m*a.m/g;a.u+=g*Math.cos(b)/a.m;a.v+=g*Math.sin(b)/a.m;a.xpoints.push(a.x);a.ypoints.push(a.y);a.colors.push(Math.abs(a.initSpeed-Math.sqrt(a.u*a.u+a.v*a.v))<0.1?"rgb(256, 256, 0)":Math.sqrt(a.u*a.u+a.v*a.v)>a.initSpeed*1.5?"rgb(256, 0, 0)":Math.sqrt(a.u*a.u+a.v*a.v)>a.initSpeed?"rgb(256, 128, 128)":Math.sqrt(a.u*a.u+
a.v*a.v)>a.initSpeed/1.2?"rgb(64, 64, 256)":"rgb(128, 256, 256)");a.x+=a.u;a.y+=a.v}}for(e=c.length-1;e>-1;e--)n.splice(c[e],1)}})();(function(){function c(d){for(var o=0,i=0,l=e;l.tagName!="BODY";){o+=e.offsetTop;i+=e.offsetLeft;l=l.offsetParent}j.setEarthMass(parseFloat(q.innerHTML));n.push(new r({x:parseInt(d.clientX-i+window.pageXOffset),y:parseInt(d.clientY-o+window.pageYOffset),u:parseFloat($(b).slider("value")),v:parseFloat($(h).slider("value")),m:parseFloat($(a).slider("value"))}))}var e,
a,g,b,h,q,s,t,u;k=function(d){k.canvas=e=document.getElementById(d.canvas);a=document.getElementById(d.satmass);g=document.getElementById(d.earthmass);b=document.getElementById(d.initx);h=document.getElementById(d.inity);q=document.getElementById(d.earthmasslbl);q.innerHTML=d.defaultearthmass;s=document.getElementById(d.satmasslbl);s.innerHTML=d.defaultsatmass;t=document.getElementById(d.initxlbl);t.innerHTML=d.defaultinitx;u=document.getElementById(d.initylbl);u.innerHTML=d.defaultinity;$(g).slider({slide:function(o,
i){var l=parseFloat(i.value);q.innerHTML=l;j.setEarthMass(l)},value:d.defaultearthmass,min:1,max:100,step:1});$(a).slider({slide:function(o,i){var l=parseFloat(i.value);s.innerHTML=l},value:d.defaultsatmass,min:1,max:30,step:1});$(b).slider({slide:function(o,i){t.innerHTML=i.value},value:d.defaultinitx,min:-3,max:3,step:0.5});$(h).slider({slide:function(o,i){u.innerHTML=i.value},value:d.defaultinity,min:-3,max:3,step:0.5});$(a).val(d.defaultsatmass);$(g).val(d.defaultearthmass);$(b).val(d.defaultinitx);
$(h).val(d.defaultinity);$(k.canvas).click(c);$("#RESET_INPUT").click(function(){n=[]});return k}})();(function(){r=function(c){this.u=c.u;this.v=c.v;this.x=c.x;this.y=c.y;this.m=c.m;this.initSpeed=Math.sqrt(c.u*c.u+c.v*c.v);this.xpoints=[];this.ypoints=[];this.colors=[]};r.prototype.draw=function(){m.drawSatellite({x:this.x,y:this.y,radius:5,strokeStyle:"#FF0000",fillStyle:"#0000FF",xpoints:this.xpoints,ypoints:this.ypoints,colors:this.colors})}})();(function(){window.Orbits=j({renderer:{earthimg:"./images/earth.png"},
physics:{},ui:{canvas:"CANVAS_BOARD",satmass:"SAT_MASS_INPUT",satmasslbl:"SAT_MASS_LBL",earthmass:"EARTH_MASS_INPUT",earthmasslbl:"EARTH_MASS_LBL",initx:"INIT_X_INPUT",initxlbl:"INIT_X_LBL",inity:"INIT_Y_INPUT",initylbl:"INIT_Y_LBL",defaultsatmass:15,defaultearthmass:50,defaultinitx:0.5,defaultinity:0.5},settings:{earth:{x:310,y:250,r:10,r2:100}}});setInterval(function(){p.reCalc();m.redraw()},25)})()})();
