(function(){var i,m,p,k,r,n=[],e;(function(){i=function(c){e=c.settings.earth;i.UI=k(c.ui);i.Renderer=m(c.renderer);i.Physics=p(c.physics);document.getElementById("DEBUG");return i};i.setEarthMass=function(c){e.m=c*1E13}})();(function(){function c(b){if(b.x!==undefined&&b.y!==undefined&&b.radius!==undefined){a.beginPath();a.arc(b.x,b.y,b.radius,0,Math.PI*2,true);if(b.strokeStyle!==undefined){a.strokeStyle=b.strokeStyle;a.stroke()}if(b.fillStyle!==undefined){a.fillStyle=b.fillStyle;a.fill()}}}var a,
f,j=false;m=function(b){a=k.canvas.getContext("2d");f=new Image;f.src=b.earthimg;f.onload=function(){j=true};return m};m.redraw=function(){a.clearRect(0,0,k.canvas.width,k.canvas.height);j===false?c({x:e.x,y:e.y,radius:e.r,strokeStyle:"#00FF00",fillStyle:"#00FF00"}):a.drawImage(f,e.x,e.y);for(var b in n)n[b].draw()};m.drawSatellite=function(b){c(b);var g;for(g=b.xpoints.length-1;g>-1;g--)c({x:b.xpoints[g],y:b.ypoints[g],radius:1,fillStyle:b.colors[g]})}})();(function(){p=function(){return p};p.reCalc=
function(){for(var c in n){var a=n[c],f=Math.atan2(a.y-e.y,a.x-e.x),j=-6.673E-11*e.m*a.m/((a.x+e.x)*(a.x+e.x)+(a.y+e.y)*(a.y+e.y));a.u+=j*Math.cos(f);a.v+=j*Math.sin(f);a.xpoints.push(a.x);a.ypoints.push(a.y);a.colors.push(Math.abs(a.initSpeed-Math.sqrt(a.u*a.u+a.v*a.v))<0.1?"rgb(256, 256, 0)":Math.sqrt(a.u*a.u+a.v*a.v)>a.initSpeed*1.5?"rgb(256, 0, 0)":Math.sqrt(a.u*a.u+a.v*a.v)>a.initSpeed?"rgb(256, 128, 128)":Math.sqrt(a.u*a.u+a.v*a.v)>a.initSpeed/1.2?"rgb(64, 64, 256)":"rgb(128, 256, 256)");a.x+=
a.u;a.y+=a.v}}})();(function(){function c(d){for(var o=0,h=0,l=a;l.tagName!="BODY";){o+=a.offsetTop;h+=a.offsetLeft;l=l.offsetParent}i.setEarthMass(parseFloat(q.innerHTML));n.push(new r({x:parseInt(d.clientX-h+window.pageXOffset),y:parseInt(d.clientY-o+window.pageYOffset),u:parseFloat($(b).slider("value")),v:parseFloat($(g).slider("value")),m:parseFloat($(f).slider("value"))}))}var a,f,j,b,g,q,s,t,u;k=function(d){k.canvas=a=document.getElementById(d.canvas);f=document.getElementById(d.satmass);j=
document.getElementById(d.earthmass);b=document.getElementById(d.initx);g=document.getElementById(d.inity);q=document.getElementById(d.earthmasslbl);q.innerHTML=e.m;s=document.getElementById(d.satmasslbl);s.innerHTML=d.defaultsatmass;t=document.getElementById(d.initxlbl);t.innerHTML=d.defaultinitx;u=document.getElementById(d.initylbl);u.innerHTML=d.defaultinity;$(j).slider({slide:function(o,h){var l=parseFloat(h.value);q.innerHTML=l;i.setEarthMass(l)},value:e.m,min:1,max:100,step:1});$(f).slider({slide:function(o,
h){var l=parseFloat(h.value);s.innerHTML=l},value:d.defaultsatmass,min:0.2,max:25,step:0.2});$(b).slider({slide:function(o,h){t.innerHTML=h.value},value:d.defaultinitx,min:-10,max:10,step:0.25});$(g).slider({slide:function(o,h){u.innerHTML=h.value},value:d.defaultinity,min:-10,max:10,step:0.25});$(f).val(d.defaultsatmass);$(j).val(d.defaultearthmass);$(b).val(d.defaultinitx);$(g).val(d.defaultinity);$(k.canvas).click(c);$("#RESET_INPUT").click(function(){n=[]});return k}})();(function(){r=function(c){this.u=
c.u;this.v=c.v;this.x=c.x;this.y=c.y;this.m=c.m;this.initSpeed=Math.sqrt(c.u*c.u+c.v*c.v);this.xpoints=[];this.ypoints=[];this.colors=[]};r.prototype.draw=function(){m.drawSatellite({x:this.x,y:this.y,radius:5,strokeStyle:"#FF0000",fillStyle:"#0000FF",xpoints:this.xpoints,ypoints:this.ypoints,colors:this.colors})}})();(function(){window.Orbits=i({renderer:{earthimg:"./images/earth.png"},physics:{},ui:{canvas:"CANVAS_BOARD",satmass:"SAT_MASS_INPUT",satmasslbl:"SAT_MASS_LBL",earthmass:"EARTH_MASS_INPUT",
earthmasslbl:"EARTH_MASS_LBL",initx:"INIT_X_INPUT",initxlbl:"INIT_X_LBL",inity:"INIT_Y_INPUT",initylbl:"INIT_Y_LBL",defaultsatmass:1,defaultearthmass:1E3,defaultinitx:-1,defaultinity:-0.75},settings:{earth:{x:310,y:250,r:10,m:50}}});setInterval(function(){p.reCalc();m.redraw()},25)})()})();
